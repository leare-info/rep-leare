---
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const refs = await getCollection('references');
  return refs.map((ref) => ({
    params: { slug: ref.slug },
    props: { ref },
  }));
}

const { ref } = Astro.props;
const { Content } = await ref.render();
const data = ref.data;
---

<main class="prose mx-auto py-8">
  <h1>{data.title}</h1>

  {data.url && (
    <p>
      <a href={data.url} target="_blank" rel="noopener noreferrer" class="text-blue-600 underline">
        ðŸ”— Visit original site
      </a>
    </p>
  )}

  <Content />

  {data.curation_notes && (
    <section class="mt-8">
      <h2>Curation notes</h2>
      <p>{data.curation_notes}</p>
    </section>
  )}
</main>