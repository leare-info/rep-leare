---
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const refs = await getCollection('references');
  return refs.map((ref) => ({
    params: { slug: ref.slug },
    props: { ref },
  }));
}

const { ref } = Astro.props;
const { Content } = await ref.render();
const data = ref.data;
---

<main class="prose mx-auto py-8">
  <h1>{data.title}</h1>
  {data.author && <p class="text-lg text-gray-700">{data.author}</p>}
  {data.summary && <p class="text-lg text-gray-700">{data.summary}</p>}

  {data.url && (
    <p>
      <a href={data.url} target="_blank" rel="noopener noreferrer" class="text-blue-600 underline">
        ðŸ”— Visit original site
      </a>
    </p>
  )}

  <Content />

  {data.curation_notes && (
    <section class="mt-8">
      <h2>Curation notes</h2>
      <p>{data.curation_notes}</p>
    </section>
  )}
  
  {data.tags && data.tags.length > 0 && (
    <p class="mt-2 text-sm text-gray-600">
    {data.tags.join(", ")}
    </p>
  )}

</main>